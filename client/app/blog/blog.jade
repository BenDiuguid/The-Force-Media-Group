navbar

div(ng-show="viewAll")
    .container

        div(ng-show="isAdmin")
            h3(class="list-group-item-heading") New post
            .form-group
                label Title
                input.form-control(type="text" ng-model="blogpost.title")
            .form-group
                label Body
                textarea.form-control(lines="5" ng-model="blogpost.body")
                div(class="btn-group")
                    button.btn.btn-default(type="submit" data-toggle="tooltip" title="Save draft" ng-click="saveDraft()")
                        span(class="glyphicon glyphicon-floppy-save")
                    button.btn.btn-default(type="submit" data-toggle="tooltip" title="Publish" ng-click="createPost()")
                        span(class="glyphicon glyphicon-plus")

        ul(class="list-group" ng-repeat="blog in blogs | orderBy:'':true | limitTo: limit")
            li(class="list-group-item" ng-show="blog.published || isAdmin")
                div
                    div(class="btn-group" style="float:right")
                        button.btn.btn-default(ng-click="toggleView(blog)") {{numComments(blog)}} 
                            span(class="glyphicon glyphicon-comment")
                        button.btn.btn-default(ng-show="isAdmin" ng-click="deletePost(blog)" data-toggle="tooltip" title="Delete")
                            span(class="glyphicon glyphicon-trash")
                        md-checkbox.md-primary(aria-label="Checkbox" ng-model="blog.published" ng-show="isAdmin" ng-click="togglePublished(blog)")
                    h3(class="list-group-item-heading" href="#" ng-click="toggleView(blog)")
                        a(href="#") {{blog.title}}
                    h6 {{blog.updatedAt}}
                p(class="list-group-item-text" ng-if="blog.body.length > 80") {{blog.body | limitTo:80}}...
                p(class="list-group-item-text" ng-if="blog.body.length <= 80") {{blog.body}}
        button.btn.btn-default(type="submit" data-toggle="tooltip" title="Show more" ng-click="incrementLimit()" ng-if="limit < blogs.length") Show More
div(ng-show="!viewAll")
    .container
        ul(class="breadcrumb")
            li
                a(href="#" ng-click="resetView()") blog
            li
                a(href="#") {{currentBlog.title | limitTo:15}}
        div
            div(class="btn-group" style="float:right" ng-show="isAdmin")
                button.btn.btn-default(ng-click="editPost()" data-toggle="tooltip" title="Edit post")
                    span(class="glyphicon glyphicon-pencil")
                button.btn.btn-default(ng-click="deletePost(currentBlog)" data-toggle="tooltip" title="Delete")
                    span(class="glyphicon glyphicon-trash")
            h1 {{currentBlog.title}}
        h6 {{currentBlog.updatedAt}}
        .container
            div(class="well" ng-show="!edit")
                p {{currentBlog.body}}
            div(ng-show="edit")
                .form-group
                    label Title
                    input.form-control(type="text" ng-model="currentBlog.title")
                .form-group
                    label Body
                    textarea.form-control(lines="5" ng-model="currentBlog.body")
                button.btn.btn-default(type="submit" data-toggle="tooltip" title="Publish" ng-click="submitEdit()")
                    span(class="glyphicon glyphicon-plus")
div(ng-show="!viewAll")
  .container<!--lists comments for a specific blog and options for admin--> 
    md-toolbar.md-scroll-shrink(class="md-theme-light")
      |Comments
    div(class="md-toolbar-tools")
    md-content(style="height: 600px;" md-theme="altTheme")
      section
            md-list.layout-padding
              md-list-item(class="md-3-line" ng-repeat="comment in comments" ng-if="comment.blogId == currentBlog._id")
                  div(class="md-list-item-text")
                    <!--<h3>{{message.what}}</h3>
                    <h4>{{message.who}}</h4>-->
                    p{{comment.body}}
                    md-button(class="md-warn md-raised md-hue-2" ng-show="isAdmin" data-toggle="tooltip" ng-click="deleteComment(comment)" title="Delete") Delete 
                    md-divider(ng-if="!$last")
    .form-group <!--form for adding a new comment--> 
        label New Comment
        textarea.form-control(rows="5" ng-disabled="!isLoggedIn" ng-model="comment.text" placeholder="comment")
    button.btn.btn-default(type="submit" data-toggle="tooltip" title="Submit comment" ng-disabled="!isLoggedIn" ng-click="createComment()")
        span(class="glyphicon glyphicon-comment")

footer
